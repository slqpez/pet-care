var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,o=(e,t)=>{for(var r in t||(t={}))n.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))s.call(t,r)&&l(e,r,t[r]);return e},c=(e,a)=>t(e,r(a));import{r as i,R as m,T as u,t as p,u as d,L as g,S as h,a as E,b as f,B as v}from"./vendor.fed1d660.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function y({text:e,type:t}){const r="custom-id-yes";let a=function(){};return"error"===t?a=()=>p.error(`${e}`,{toastId:r,position:"top-center",autoClose:!1,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,delay:10}):"success"===t&&(a=()=>p.success(`${e}`,{toastId:r,position:"top-center",autoClose:!1,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,delay:10})),i.exports.useEffect((()=>{a()}),[]),m.createElement("div",null,m.createElement(u,{className:"message"}))}function k(){return m.createElement("div",{className:"sk-circle"},m.createElement("div",{className:"sk-circle1 sk-child"}),m.createElement("div",{className:"sk-circle2 sk-child"}),m.createElement("div",{className:"sk-circle3 sk-child"}),m.createElement("div",{className:"sk-circle4 sk-child"}),m.createElement("div",{className:"sk-circle5 sk-child"}),m.createElement("div",{className:"sk-circle6 sk-child"}),m.createElement("div",{className:"sk-circle7 sk-child"}),m.createElement("div",{className:"sk-circle8 sk-child"}),m.createElement("div",{className:"sk-circle9 sk-child"}),m.createElement("div",{className:"sk-circle10 sk-child"}),m.createElement("div",{className:"sk-circle11 sk-child"}),m.createElement("div",{className:"sk-circle12 sk-child"}))}function N(){const[e,t]=i.exports.useState({username:"",password:""}),[r,a]=i.exports.useState({isError:!1,text:"",type:"error"}),[n,s]=i.exports.useState(!1),l=r=>{t(c(o({},e),{[r.target.name]:r.target.value}))};return m.createElement("div",{className:"login-container"},r.isError?m.createElement(y,{text:r.text,type:r.type}):null,m.createElement("div",{className:"Login"},m.createElement("h2",{className:"login-title"},"Ingresar"),m.createElement("form",{onSubmit:t=>{s(!0),t.preventDefault(),fetch("https://petcareiw.herokuapp.com/api/auth/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{s(!1),e.rf_token?(localStorage.setItem("rf_token",e.rf_token),window.location="/"):(a(c(o({},r),{text:e.msg,isError:!0})),setTimeout((()=>{a(c(o({},r),{isError:!1}))}),2e3))})).catch((e=>console.log("err")))}},m.createElement("div",{className:"inputs-container"},m.createElement("input",{className:"input-login",type:"text",name:"username",onChange:l,placeholder:"Nombre de usuario",value:e.username}),m.createElement("input",{className:"input-login",type:"password",name:"password",onChange:l,placeholder:"Contraseña",valu:e.password})),m.createElement("button",{className:"btn-login"},"Ingresar"))),n?m.createElement(k,null):null)}function b(){const[e,t]=i.exports.useState({});d();const r=localStorage.getItem("rf_token");i.exports.useEffect((()=>{fetch("https://petcareiw.herokuapp.com/api/users/getUser",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({token:r})}).then((e=>e.json())).then((e=>t(e.user))).catch((e=>console.log(e)))}),[]);return m.createElement("div",{className:"Home"},m.createElement("h1",null,"Bienvenido, ",e.username,"."),m.createElement(g,{to:"/register",className:"btn-create"},"Crear nuevo empleado ➕"),m.createElement("button",{className:"btn-out",onClick:()=>{localStorage.removeItem("rf_token"),window.location.href="/login",setIsLogged(!1)}},"Salir"))}function w(){const[e,t]=i.exports.useState({username:"",password:"",email:""}),[r,a]=i.exports.useState({show:!1,text:"",type:""}),[n,s]=i.exports.useState(!1),l=r=>{t(c(o({},e),{[r.target.name]:r.target.value}))};return m.createElement("div",null,m.createElement("div",{className:"login-container"},m.createElement(g,{className:"back-btn",to:"/"},"Volver ⬅"),r.show?m.createElement(y,{text:r.text,type:r.type}):null,m.createElement("div",{className:"Login"},m.createElement("h2",{className:"login-title"},"Resgistrar"),m.createElement("form",{onSubmit:n=>{s(!0),n.preventDefault(),fetch("https://petcareiw.herokuapp.com/api/users",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{s(!1),e.created?(a({type:"success",text:e.msg,show:!0}),t({username:"",password:"",email:""}),setTimeout((()=>{a(c(o({},r),{show:!1}))}),2e3)):(a({type:"error",text:e.msg,show:!0}),setTimeout((()=>{a(c(o({},r),{show:!1}))}),2e3))})).catch((e=>console.log(e)))}},m.createElement("div",{className:"inputs-container"},m.createElement("input",{className:"input-login",type:"text",name:"username",onChange:l,placeholder:"Nombre de usuario",value:e.username}),m.createElement("input",{className:"input-login",type:"text",name:"email",onChange:l,placeholder:"Correo",value:e.email}),m.createElement("input",{className:"input-login",type:"password",name:"password",onChange:l,placeholder:"Contraseña",value:e.password})),m.createElement("button",{className:"btn-login"},"Registrar"))),n?m.createElement(k,null):null))}function x(){const e=!!localStorage.getItem("rf_token");return m.createElement(h,null,m.createElement(E,{exact:!0,path:"/"},e?m.createElement(b,null):m.createElement(N,null)),m.createElement(E,{exact:!0,path:"/login"},e?m.createElement(b,null):m.createElement(N,null)),m.createElement(E,{exact:!0,path:"/register"},e?m.createElement(w,null):m.createElement(N,null)))}f.render(m.createElement(m.StrictMode,null,m.createElement(v,null,m.createElement(x,null))),document.getElementById("root"));
